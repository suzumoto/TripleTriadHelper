# TripleTriadHelper
Final Fantasy VIII のカードゲーム Triple Triadのゲーム木探索プログラムです。

## 概要
Triple Triadのゲーム木を、深さ優先でMini-max解析します。
両プレイヤーが最善のプレイをし続けた場合に、どのような結果になるかを探索することができます。

## 前提
1. ルール オープンが適用されているものとします。オープンが無く、相手の手札が分からない場合はこのプログラムは使えません。
    - 非オープンな場合の改善案をIssuesに書いておきます。アイデアだけで実装はしない予定です
    
2. 相手(CPU)も最善の手を選び続けるとして探索します。
    - 実際にはCPUはある決まったアルゴリズムによって動いているのため、乱数によって手を決める一部のCPUを除いて相手の動きを完全に予測することができます。これを利用して探索すべきゲーム木を大幅に削減することができますが、未実装の機能です。
    
    
## 構成
```
.
├── include
│   ├── Board.hpp
│   ├── Rulus.hpp
│   └── CardData.hpp
│   
├── src
│   ├── main.cpp
│   ├── Board.cpp
│   ├── Rules.cpp
│   └── CardData.cpp
│
└── tests
    ├── eval-test.cpp
    ├── io-test.cpp
    └── play-test.cpp
```

`Board` というclassがゲームの進行を管理しています。ゲーム木探索のための一連の手続きもこのクラスに実装しています。改造する場合はこのclassを改造すると良いと思います。

UIはすべて `main.cpp` のmain関数内に集約しています。これは非常によくない設計である自覚はあります。UIを設計するのが面倒で現状のスタイルになっています。
`main.cpp` にはルールを入力するUIが無く、強制的にオープンのみのルールになります。
`Board` クラスは セイム・プラス・ウォールセイム・エレメンタル 等の厄介なルールにも対応しているので、 `main.cpp` を書き換えれば別のルールにも対応できます。

## ビルド
ビルドシステムにはCMakeをつかっています。CMake 3.14 以上が必要です。
```
$ mkdir build
$ cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
$ mmake --build build
```
などでビルドしてください

## 使い方
```
$ cd build/src
$ ./main.exe
(自分の手札を5枚入力 カードの上から時計回りに数字を入力する, 下はゼル、リノア、イデア、サイファー、スコールの例)
85a6
4a2a
aa33
69a4
a469
(相手の手札を5枚入力, 下はハウリザード、フンゴオンゴ、バイトバグ、レッドマウス、プリヌラの例)
1415
5113
1335
5112
2315
(先手・後手を入力 自分が先手なら0, 後手なら1)
0
(盤面が表示される 手番のプレイヤーの手を選択するか、盤面を探索する)
0 0 (0番目のカードを0番地に置く)
etc....
```

手札は上から 0 1 2 3 4 と番号づけされていて、カードを消費すると上に詰めていく。
   - 例: 手札がゼル リノア イデア サイファー スコールのとき、ゼルは0番目, スコールは4番目。
     ここからサイファーを使うと、次回の手番ではスコールは3番目に繰り上がる。
     
番地は以下のように番号づけされている。
```
0  1  2
3  4  5
6  7  8
```  

## 動作環境
筆者の動作(開発)環境を書いておきます。その他の環境では試していません。
* OS:      Ubuntu 22.04.2 LTS on WSL2, Windows 10(64bit)
* Compiler: g++ 11.3.0

## License
ライセンスファイルを参照してください。
本プログラムはMITライセンスで公開しています。
